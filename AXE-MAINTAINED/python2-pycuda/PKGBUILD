# $Id$
# Maintainer: Jubei-Mitsuyoshi <jubei.house.of.five.masters@gmail.com>
# Maintainer: St√©phane Gaudreault <stephane@archlinux.org>


#--------------------
pkgname=python2-pycuda
#--------------------
pkgver=2012.1
_arch_rel=1
_axe_rel=1
#--------------------
pkgrel="${_AXE_PREFIX_REL}.${_AXE_STAGE}.${_arch_rel}.${_axe_rel}.${_AXE_PROCESOR_REL}.${_AXE_SUFFIX_REL}"
pkgdesc="Python wrapper for Nvidia CUDA"
arch=('i686' 'x86_64')
url="http://mathema.tician.de/software/pycuda"
license=('MIT/X Consortium')
groups=("axis")
source=(http://pypi.python.org/packages/source/p/pycuda/pycuda-${pkgver}.tar.gz)
depends=('cuda' 'python2-numpy' 'python2-pytools' 'python2')
optdepends=('python2-pytest')
makedepends=('ctags' 'python2-distribute' 'mesa')
provides=('pycuda')
replaces=('pycuda')
conflicts=('pycuda')
sha1sums=('DD52EE697AE9F6256EFAC3BCA682BE9C6E7C9649')

build() {
   cd "${srcdir}/pycuda-${pkgver}"
   python2 ./configure.py \
                  --cuda-root=/opt/cuda \
                  --boost-compiler=gcc \
                  --cuda-enable-gl \
                  --cuda-inc-dir=/opt/cuda/include \
                  --cudadrv-lib-dir=/opt/cuda/lib \
                  --cudart-lib-dir=/opt/cuda/lib

   make
}

#with boost option
#--boost-inc-dir=/usr/include/boost \
#--boost-lib-dir=/usr/lib \
#--boost-python-libname=boost_python-mt \
#--boost-thread-libname=boost_thread-mt \

package() {
   cd "${srcdir}/pycuda-${pkgver}"
   python2 setup.py install --prefix=/usr --root="${pkgdir}" --skip-build --optimize=1
}
